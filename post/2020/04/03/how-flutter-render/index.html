<!DOCTYPE html>
<html lang="zh">
  <head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="chrome=1" />
  <meta name="renderer" content="webkit|ie-comp|ie-stand" />
  <meta name="referrer" content="no-referrer" />
  <meta name="theme-color" content="#333333" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="google" content="notranslate" />
  <meta name="format-detection" content="telephone=no" />
  <meta name="keyword" content="å†·çŸ³, å‰ç«¯, é¢è¯•ï¼ŒWeb, Js, CSS, Node.js, Frontend, Flutter, Docker, Dart, Mysql, Egg.js" />
  <meta name="description" content="å­‘ç„¶ä¸€èº«ï¼Œå‚²ç«‹äºä¸–" />
  <title>å†·çŸ³çš„åšå®¢</title>
  <base href="/" />
  <link rel="preconnect" href="//cdn.jsdelivr.net" />
  <link rel="shortcut icon" href="/icons/icon-72x72.png" />
  <link
    rel="apple-touch-icon"
    href="/icons/icon-192x192.png"
  />
  <link
    rel="stylesheet"
    href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.7.2/build/styles/atom-one-light.min.css"
  />
  <link rel="stylesheet" href="/index.css">
  <script
    data-ad-client="ca-pub-1196485898698315"
    async
    src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"
  ></script>
</head>

  <body>
    <header class="header">
  <a class="logo" href="/">
    <img
      class="logo-img"
      src="https://avatars.githubusercontent.com/u/18013127?v=4"
    />
  </a>
  <div class="color" id="color"></div>
</header>

    <main class=""><article class="container article">
    
      <div class="article-cover">
        <img decoding="async" loading="lazy" src="./images/how-flutter-render/cover.jpg" alt="cover" />
      </div>
    

    <h1 class="article-title">Flutter æ˜¯å¦‚ä½•æ¸²æŸ“çš„ï¼Ÿ</h1>
 
    <p class="article-meta">
      <span class="article-meta-item">
        æœ€åæ›´æ–°&#58;&nbsp;<time
          class="post-time"
          datetime="2021-06-28"
          >2021-06-28</time
        >
      </span>
      <span class="article-meta-item"
        >é˜…è¯»æ—¶é—´&#58;&nbsp;6
        min</span
      >

    </p>
  </section>

  <section class=""><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ä½¿ç”¨ Flutter å¼€å‘ç§»åŠ¨ç«¯æœ‰ä¸€æ®µæ—¶é—´äº†ï¼Œæ€»ç»“ä¸€ä¸‹å…³äº UI æ¸²æŸ“æ–¹é¢çš„çŸ¥è¯†ã€‚äº†è§£å…³äº Flutter æ¸²æŸ“æ–¹é¢çš„çŸ¥è¯†è¿˜æ˜¯æœ‰å¿…è¦çš„ï¼Œå¯ä»¥å¸®åŠ©ä½ å¼€å‘æ›´ç¨³å®šï¼Œæ€§èƒ½æ›´é«˜çš„åº”ç”¨ã€‚</p>
<p>è¦è§£ç­”è¿™ä¸ªé—®é¢˜ï¼Œé¦–å…ˆéœ€è¦è®¤è¯†åˆ° Flutter ä¸­æœ‰ä¸‰æ£µæ ‘ï¼š<code>Widget</code> æ ‘ï¼Œ<code>Element</code> æ ‘å’Œ <code>RenderObject</code> æ ‘ã€‚</p>
<p>å½“åº”ç”¨å¯åŠ¨æ—¶ Flutter ä¼šéå†å¹¶åˆ›å»ºæ‰€æœ‰çš„ <code>Widget</code> å½¢æˆ <code>Widget Tree</code>ï¼ŒåŒæ—¶ä¸ <code>Widget Tree</code> ç›¸å¯¹åº”ï¼Œé€šè¿‡è°ƒç”¨ <code>Widget</code> ä¸Šçš„ <code>createElement()</code> æ–¹æ³•åˆ›å»ºæ¯ä¸ª <code>Element</code> å¯¹è±¡ï¼Œå½¢æˆ <code>Element Tree</code>ã€‚</p>
<p>æœ€åè°ƒç”¨ <code>Element</code> çš„ <code>createRenderObject()</code> æ–¹æ³•åˆ›å»ºæ¯ä¸ªæ¸²æŸ“å¯¹è±¡ï¼Œå½¢æˆä¸€ä¸ª <code>Render Tree</code>ã€‚</p>
<p>ç„¶åéœ€è¦çŸ¥é“ <code>Widget</code>ï¼Œ<code>Element</code> å’Œ <code>RenderObject</code> åˆ°åº•æ˜¯å•¥ä»¥åŠå®ƒä»¬æ˜¯å¹²ä»€ä¹ˆçš„ã€‚</p>
<h2 id="ä»€ä¹ˆæ˜¯-Widget"><a href="#ä»€ä¹ˆæ˜¯-Widget" class="headerlink" title="ä»€ä¹ˆæ˜¯ Widget"></a>ä»€ä¹ˆæ˜¯ Widget</h2><p><code>Widget</code> æ˜¯ Flutter çš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œæ˜¯ç”¨æˆ·ç•Œé¢çš„ä¸å¯å˜æè¿°ä¿¡æ¯ã€‚æ­£å¦‚ Flutter çš„å£å· <code>Everythingâ€™s a widget</code>, ç”¨ Flutter å¼€å‘åº”ç”¨å°±æ˜¯åœ¨å†™ <code>Widget</code> ğŸ¶ã€‚</p>
<p>Flutter çš„ <code>Widget</code> ä¸åªè¡¨ç¤º UI æ§ä»¶ï¼Œè¿˜è¡¨ç¤ºä¸€äº›åŠŸèƒ½æ€§çš„ç»„ä»¶ï¼Œå¦‚è·¯ç”±è·³è½¬ <code>Navigator</code>ï¼Œæ‰‹åŠ¿æ£€æµ‹ <code>GestureDetector</code> ç»„ä»¶ç­‰ã€‚</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@immutable</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Widget</span> <span class="keyword">extends</span> <span class="title">DiagnosticableTree</span> </span>&#123;</span><br><span class="line">  <span class="comment">/// <span class="markdown">Initializes [key] for subclasses.</span></span></span><br><span class="line">  <span class="keyword">const</span> Widget(&#123; <span class="keyword">this</span>.key &#125;);</span><br><span class="line">  <span class="keyword">final</span> Key key;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">...</span></span></span><br><span class="line"></span><br><span class="line">  <span class="meta">@protected</span></span><br><span class="line">  <span class="built_in">Element</span> createElement();</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">...</span></span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> <span class="built_in">bool</span> canUpdate(Widget oldWidget, Widget newWidget) &#123;</span><br><span class="line">    <span class="keyword">return</span> oldWidget.runtimeType == newWidget.runtimeType</span><br><span class="line">      &amp;&amp; oldWidget.key == newWidget.key;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>Widget</code> çš„ <code>canUpdate</code> æ–¹æ³•é€šè¿‡æ¯”è¾ƒæ–°éƒ¨ä»¶å’Œæ—§éƒ¨ä»¶çš„ <code>runtimeType</code> å’Œ <code>key</code> å±æ€§æ˜¯å¦ç›¸åŒæ¥å†³å®šæ›´æ–°éƒ¨ä»¶å¯¹åº”çš„ <code>Element</code>ã€‚</p>
<h2 id="ä»€ä¹ˆæ˜¯-Element"><a href="#ä»€ä¹ˆæ˜¯-Element" class="headerlink" title="ä»€ä¹ˆæ˜¯ Element"></a>ä»€ä¹ˆæ˜¯ Element</h2><p><code>Element</code> æ˜¯å®ä¾‹åŒ–çš„ <code>Widget</code> å¯¹è±¡ï¼Œé€šè¿‡ <code>Widget</code> çš„ <code>createElement()</code> æ–¹æ³•ï¼Œåœ¨ç‰¹å®šä½ç½®ä½¿ç”¨ <code>Widget</code> é…ç½®æ•°æ®ç”Ÿæˆã€‚</p>
<p><code>Element</code> ç”¨äºç®¡ç†åº”ç”¨ UI çš„æ›´æ–°å’Œæ›´æ”¹ï¼Œç®¡ç†éƒ¨ä»¶çš„ç”Ÿå‘½å‘¨æœŸï¼Œæ¯ä¸ª <code>Element</code> éƒ½åŒ…å«å¯¹ <code>Widget</code> å’Œ <code>RenderObject</code> çš„å¼•ç”¨ã€‚</p>
<p><img src="./images/how-flutter-render/relationship.png" alt="relationship"></p>
<p>å½“ <code>Widget</code> å˜åŒ–æ—¶ï¼Œå¦‚æœä¸¤ä¸ª <code>Widget</code> çš„ <code>runtimeType</code> å’Œ <code>key</code> å±æ€§ç›¸åŒçš„ï¼Œé‚£ä¹ˆæ–°çš„ <code>Element</code> ä¼šé€šè¿‡ <code>Element.update()</code> æ›´æ–°æ—§çš„ <code>Element</code>ï¼Œå¦åˆ™æ—§çš„ <code>Element</code> ä¼šè¢«åˆ é™¤ï¼Œæ–°ç”Ÿæˆçš„ <code>Element</code> æ’å…¥åˆ°æ ‘ä¸­ã€‚</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Element</span> <span class="keyword">extends</span> <span class="title">DiagnosticableTree</span> <span class="keyword">implements</span> <span class="title">BuildContext</span> </span>&#123;</span><br><span class="line">  <span class="comment">/// <span class="markdown">Creates an element that uses the given widget as its configuration.</span></span></span><br><span class="line">  <span class="comment">///</span></span><br><span class="line">  <span class="comment">/// <span class="markdown">Typically called by an override of [Widget.createElement].</span></span></span><br><span class="line">  <span class="built_in">Element</span>(Widget widget)</span><br><span class="line">    : <span class="keyword">assert</span>(widget != <span class="keyword">null</span>),</span><br><span class="line">      _widget = widget;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">Change the widget used to configure this element.</span></span></span><br><span class="line">  <span class="comment">///</span></span><br><span class="line">  <span class="comment">/// <span class="markdown">The framework calls this function when the parent wishes to use a</span></span></span><br><span class="line">  <span class="comment">/// <span class="markdown">different widget to configure this element. The new widget is guaranteed</span></span></span><br><span class="line">  <span class="comment">/// <span class="markdown">to have the same [runtimeType] as the old widget.</span></span></span><br><span class="line">  <span class="comment">///</span></span><br><span class="line">  <span class="comment">/// <span class="markdown">This function is called only during the "active" lifecycle state.</span></span></span><br><span class="line">  <span class="meta">@mustCallSuper</span></span><br><span class="line">  <span class="keyword">void</span> update(<span class="keyword">covariant</span> Widget newWidget) &#123;</span><br><span class="line">    <span class="comment">/// <span class="markdown">...</span></span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">Creates an instance of the [RenderObject] class that this</span></span></span><br><span class="line">  <span class="comment">/// <span class="markdown">[RenderObjectWidget] represents, using the configuration described by this</span></span></span><br><span class="line">  <span class="comment">/// <span class="markdown">[RenderObjectWidget].</span></span></span><br><span class="line">  <span class="comment">///</span></span><br><span class="line">  <span class="comment">/// <span class="markdown">This method should not do anything with the children of the render object.</span></span></span><br><span class="line">  <span class="comment">/// <span class="markdown">That should instead be handled by the method that overrides</span></span></span><br><span class="line">  <span class="comment">/// <span class="markdown">[RenderObjectElement.mount] in the object rendered by this object's</span></span></span><br><span class="line">  <span class="comment">/// <span class="markdown">[createElement] method. See, for example,</span></span></span><br><span class="line">  <span class="comment">/// <span class="markdown">[SingleChildRenderObjectElement.mount].</span></span></span><br><span class="line">  <span class="meta">@protected</span></span><br><span class="line">  RenderObject createRenderObject(BuildContext context);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ä»€ä¹ˆæ˜¯-RenderObject"><a href="#ä»€ä¹ˆæ˜¯-RenderObject" class="headerlink" title="ä»€ä¹ˆæ˜¯ RenderObject"></a>ä»€ä¹ˆæ˜¯ RenderObject</h2><p><code>RenderObject</code> ç”¨äºåº”ç”¨ç•Œé¢çš„å¸ƒå±€å’Œç»˜åˆ¶ï¼Œä¿å­˜äº†å…ƒç´ çš„å¤§å°ï¼Œå¸ƒå±€ç­‰ä¿¡æ¯ï¼Œå®ä¾‹åŒ–ä¸€ä¸ª <code>RenderObject</code> æ˜¯éå¸¸è€—èƒ½çš„ã€‚</p>
<p>å½“åº”ç”¨è¿è¡Œæ—¶ Flutter ä½¿ç”¨ <code>RenderObject</code> çš„æ•°æ®ç»˜åˆ¶åº”ç”¨ç•Œé¢ï¼Œæœ€ç»ˆå½¢æˆä¸€ä¸ª <code>Render Tree</code>ã€‚</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">RenderObject</span> <span class="keyword">extends</span> <span class="title">AbstractNode</span> <span class="title">with</span> <span class="title">DiagnosticableTreeMixin</span> <span class="keyword">implements</span> <span class="title">HitTestTarget</span> </span>&#123;</span><br><span class="line">  <span class="comment">/// <span class="markdown">Initializes internal fields for subclasses.</span></span></span><br><span class="line">  RenderObject() &#123;</span><br><span class="line">    _needsCompositing = isRepaintBoundary || alwaysNeedsCompositing;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">The render object at (or below) this location in the tree.</span></span></span><br><span class="line">  <span class="comment">///</span></span><br><span class="line">  <span class="comment">/// <span class="markdown">If this object is a [RenderObjectElement], the render object is the one at</span></span></span><br><span class="line">  <span class="comment">/// <span class="markdown">this location in the tree. Otherwise, this getter will walk down the tree</span></span></span><br><span class="line">  <span class="comment">/// <span class="markdown">until it finds a [RenderObjectElement].</span></span></span><br><span class="line">  RenderObject <span class="keyword">get</span> renderObject &#123;</span><br><span class="line">    RenderObject result;</span><br><span class="line">    <span class="keyword">void</span> visit(<span class="built_in">Element</span> element) &#123;</span><br><span class="line">      <span class="keyword">assert</span>(result == <span class="keyword">null</span>); <span class="comment">// this verifies that there's only one child</span></span><br><span class="line">      <span class="keyword">if</span> (element <span class="keyword">is</span> RenderObjectElement)</span><br><span class="line">        result = element.renderObject;</span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">        element.visitChildren(visit);</span><br><span class="line">    &#125;</span><br><span class="line">    visit(<span class="keyword">this</span>);</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> layout(Constraints constraints, &#123; <span class="built_in">bool</span> parentUsesSize = <span class="keyword">false</span> &#125;) &#123;</span><br><span class="line">    <span class="comment">/// <span class="markdown">...</span></span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">...</span></span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> paint(PaintingContext context, Offset offset) &#123;</span><br><span class="line">    <span class="comment">/// <span class="markdown">...</span></span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ä¸ºä»€ä¹ˆéœ€è¦ä¸‰æ£µæ ‘"><a href="#ä¸ºä»€ä¹ˆéœ€è¦ä¸‰æ£µæ ‘" class="headerlink" title="ä¸ºä»€ä¹ˆéœ€è¦ä¸‰æ£µæ ‘"></a>ä¸ºä»€ä¹ˆéœ€è¦ä¸‰æ£µæ ‘</h2><p>ä½¿ç”¨ä¸‰æ£µæ ‘çš„ç›®çš„æ˜¯å°½å¯èƒ½å¤ç”¨ <code>Element</code>ã€‚</p>
<p>å¤ç”¨ <code>Element</code> å¯¹æ€§èƒ½éå¸¸é‡è¦ï¼Œå› ä¸º <code>Element</code> æ‹¥æœ‰ä¸¤ä»½å…³é”®æ•°æ®ï¼š<code>Stateful widget</code> çš„çŠ¶æ€å¯¹è±¡åŠåº•å±‚çš„<br><code>RenderObject</code>ã€‚</p>
<p>å½“åº”ç”¨çš„ç»“æ„å¾ˆç®€å•æ—¶ï¼Œæˆ–è®¸ä½“ç°ä¸å‡ºè¿™ç§ä¼˜åŠ¿ï¼Œä¸€æ—¦åº”ç”¨å¤æ‚èµ·æ¥ï¼Œæ„æˆé¡µé¢çš„å…ƒç´ è¶Šæ¥è¶Šå¤šï¼Œé‡æ–°åˆ›å»º 3 æ£µæ ‘çš„ä»£ä»·æ˜¯å¾ˆé«˜çš„ï¼Œæ‰€ä»¥éœ€è¦æœ€å°åŒ–æ›´æ–°æ“ä½œã€‚</p>
<p>å½“ Flutter èƒ½å¤Ÿå¤ç”¨ <code>Element</code> æ—¶ï¼Œç”¨æˆ·ç•Œé¢çš„é€»è¾‘çŠ¶æ€ä¿¡æ¯æ˜¯ä¸å˜çš„ï¼Œå¹¶ä¸”å¯ä»¥é‡ç”¨ä¹‹å‰è®¡ç®—çš„å¸ƒå±€ä¿¡æ¯ï¼Œé¿å…éå†æ•´æ£µæ ‘ã€‚</p>
<h2 id="ä¸¾ä¸ªä¾‹å­è¯´æ˜"><a href="#ä¸¾ä¸ªä¾‹å­è¯´æ˜" class="headerlink" title="ä¸¾ä¸ªä¾‹å­è¯´æ˜"></a>ä¸¾ä¸ªä¾‹å­è¯´æ˜</h2><p>åˆ›å»ºä¸€ä¸ªç®€å•çš„ Flutter åº”ç”¨ï¼Œä»£ç å¦‚ä¸‹</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  runApp(</span><br><span class="line">    MaterialApp(</span><br><span class="line">      color: Colors.white,</span><br><span class="line">      debugShowCheckedModeBanner: <span class="keyword">false</span>,</span><br><span class="line">      builder: (context, child) =&gt; HomePage(),</span><br><span class="line">    ),</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HomePage</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  _HomePageState createState() =&gt; _HomePageState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_HomePageState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">HomePage</span>&gt; </span>&#123;</span><br><span class="line">  <span class="built_in">bool</span> _isWorld = <span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line">  Widget _buildWorld() &#123;</span><br><span class="line">    <span class="keyword">return</span> RichText(</span><br><span class="line">      text: TextSpan(</span><br><span class="line">        text: <span class="string">'Hello world'</span>,</span><br><span class="line">        style: TextStyle(color: Colors.black),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  Widget _buildFlutter() &#123;</span><br><span class="line">    <span class="keyword">return</span> RichText(</span><br><span class="line">      text: TextSpan(</span><br><span class="line">        text: <span class="string">'Hello flutter'</span>,</span><br><span class="line">        style: TextStyle(color: Colors.black),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> changeText() &#123;</span><br><span class="line">    setState(() &#123;</span><br><span class="line">      _isWorld = !_isWorld;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      body: Column(</span><br><span class="line">        mainAxisAlignment: MainAxisAlignment.center,</span><br><span class="line">        children: &lt;Widget&gt;[</span><br><span class="line">          Center(</span><br><span class="line">            child: _isWorld ? _buildWorld() : _buildFlutter(),</span><br><span class="line">          ),</span><br><span class="line">          SizedBox(height: <span class="number">20.0</span>),</span><br><span class="line">          <span class="comment">// Padding(padding: EdgeInsets.only(top: 20.0)),</span></span><br><span class="line">          IconButton(icon: Icon(Icons.refresh), onPressed: changeText)</span><br><span class="line">        ],</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ˜¾ç¤ºæ•ˆæœ</p>
<img src="./images/how-flutter-render/simulator-world.png" style="width: 320px;">

<p>æ‰“å¼€ <a href="http://127.0.0.1:9100" target="_blank" rel="noopener">Dart DevTools</a>ï¼Œå¯ä»¥çœ‹åˆ°åº”ç”¨çš„ <code>Widget Tree</code>ï¼Œæ­¤æ—¶ <code>RichText</code> æ§ä»¶çš„ <code>RenderObject</code> çš„ ID æ˜¯ <code>#6276a</code></p>
<p><img src="./images/how-flutter-render/world-id.png" alt="world-id"></p>
<p>ç‚¹å‡»å›¾æ ‡å°†æ–‡å­—å˜æˆ <code>Hello flutter</code> æ—¶</p>
<img src="./images/how-flutter-render/simulator-flutter.png" style="width: 320px;">

<p>åˆ·æ–°æµè§ˆå™¨é¡µé¢å†æ¬¡æŸ¥çœ‹ <code>RichText</code> çš„ <code>RenderObject</code> çš„ ID ä¾ç„¶æ˜¯ <code>#6276a</code></p>
<p><img src="./images/how-flutter-render/flutter-id.png" alt="flutter-id"></p>
<p>å¯ä»¥å‘ç° Flutter åªæ˜¯æ›´æ–°äº†æ–‡å­—æ•°æ®ï¼Œå¤ç”¨äº† <code>RichText</code> å¯¹åº”çš„ <code>Element</code> å’Œ <code>RenderObject</code>ã€‚</p>
<p>è€Œä½¿ç”¨ <code>SizedBox</code> éƒ¨ä»¶å–ä»£ <code>Padding</code> éƒ¨ä»¶æ—¶ã€‚</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@override</span></span><br><span class="line">Widget build(BuildContext context) &#123;</span><br><span class="line">  <span class="keyword">return</span> Scaffold(</span><br><span class="line">    body: Column(</span><br><span class="line">      mainAxisAlignment: MainAxisAlignment.center,</span><br><span class="line">      children: &lt;Widget&gt;[</span><br><span class="line">        Center(</span><br><span class="line">          child: RichText(</span><br><span class="line">            text: TextSpan(</span><br><span class="line">              text: <span class="string">'Hello <span class="subst">$text</span>'</span>,</span><br><span class="line">              style: TextStyle(color: Colors.black),</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">        SizedBox(height: <span class="number">20.0</span>),</span><br><span class="line">        <span class="comment">// Padding(padding: EdgeInsets.only(top: 20.0)),</span></span><br><span class="line">        IconButton(icon: Icon(Icons.refresh), onPressed: changeText)</span><br><span class="line">      ],</span><br><span class="line">    ),</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="./images/how-flutter-render/padding.png" alt="padding"></p>
<p><code>Padding</code> éƒ¨ä»¶å¯¹åº”çš„  <code>Element</code> å’Œ <code>RenderObject</code> éƒ½ä¼šè¢«ä»æ ‘ä¸­ç§»é™¤ï¼Œä½¿ç”¨ <code>SizedBox</code> æ–°ç”Ÿæˆçš„æ›¿ä»£ã€‚</p>
<p><img src="./images/how-flutter-render/sizeedbox.png" alt="sizeedbox"></p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p><code>Widget</code> æ˜¯åº”ç”¨ç•Œé¢çš„å£°æ˜ä¿¡æ¯ã€‚<br><code>Element</code> é“¾æ¥ <code>Widget</code> å’Œ <code>RenderObject</code>ï¼Œç®¡ç†ç•Œé¢çš„æ›´æ–°å’Œä¿®æ”¹ã€‚<br><code>RenderObject</code> ä¿å­˜å…·ä½“çš„å¸ƒå±€ä¿¡æ¯ï¼Œè´Ÿè´£ç»˜åˆ¶ UIã€‚</p>
<p><img src="./images/how-flutter-render/widget-element-render-object.png" alt="widget-element-render-object"></p>
<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://youtu.be/996ZgFRENMs" target="_blank" rel="noopener">How Flutter renders Widgets</a> (Video)</p>
<p><a href="https://medium.com/manabie/how-flutter-renders-widgets-fd6eca945a04" target="_blank" rel="noopener">How Flutter renders Widgets</a></p>
<p><a href="https://book.flutterchina.club/chapter14/flutter_ui_system.html" target="_blank" rel="noopener">Flutter UIç³»ç»Ÿ</a></p></section>

  <a
  class="license-link"
  rel="license"
  href="https://creativecommons.org/licenses/by-nc-sa/4.0/legalcode.zh-Hans"
>
  <img
    class="license-img"
    alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®"
    src="https://img.shields.io/badge/license-BY--NC--SA%204.0-green"
  />
</a>

  <section class="article-more">
    
    <a
      class=""
      href="/post/2020/04/13/flutter-stream/"
      title="åœ¨ Flutter é‡Œä½¿ç”¨ Stream"
    >
      &larr;&nbsp;åœ¨ Flutter é‡Œä½¿ç”¨ Stream
    </a>
     
    <a
      class=""
      href="/post/2020/03/26/learn-classchart-flowchart/"
      title="PlantUML ç±»å›¾åŠ Flowchart æµç¨‹å›¾ç»˜åˆ¶å…¥é—¨"
    >
      PlantUML ç±»å›¾åŠ Flowchart æµç¨‹å›¾ç»˜åˆ¶å…¥é—¨&nbsp;&rarr;
    </a>
    
  </section>
</article></main>
    <footer class="footer container">
  <ul class="sns-list">
    <li class="sns-list-item">
      <p class="">
        å…±è®¡&#58; 61 ç¯‡
      </p>
    </li>
    <li class="sns-list-item">
      <p class="">
        <span class=""
          >æ€»å­—æ•°&#58; 63.9k</span
        >
      </p>
    </li>
  </ul>

  <ul class="sns-list">
    
    <li class="sns-list-item">
      <a
        class="sns-list-link"
        target="_blank"
        rel="noopener"
        href="https://github.com/xrr2016"
        >Github</a
      >
    </li>
     
    <li class="sns-list-item">
      <a
        class="sns-list-link"
        target="_blank"
        rel="noopener"
        href="https://juejin.im/user/576666b7207703006b1e0f09"
        >æ˜é‡‘</a
      >
    </li>
     
    <li class="sns-list-item">
      <a
        class="sns-list-link"
        target="_blank"
        rel="noopener"
        href="https://zhihu.com/people/needforchange/posts"
        >çŸ¥ä¹</a
      >
    </li>
     
    <li>
      <a
        class="sns-list-link"
        target="_blank"
        rel="noopener"
        href="https://leetcode-cn.com/u/coldstone"
        >åŠ›æ‰£</a
      >
    </li>
    
    <li class="sns-list-item">
      <a class="rss-link" href="/atom.xml">
        <svg
          class=""
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M6 5c7.18 0 13 5.82 13 13M6 11a7 7 0 017 7m-6 0a1 1 0 11-2 0 1 1 0 012 0z"
          />
        </svg>
      </a>
    </li>
  </ul>

  <ul class="sns-list">
    <li class="sns-list-item">
      <a
        class="sns-list-link"
        href="https://colmugx.github.io/blog/"
        target="_blank"
        >colmugx</a
      >
    </li>
    <li class="sns-list-item">
      <a class="sns-list-link" href="https://kalasearch.cn/blog" target="_blank"
        >å¡æ‹‰æœç´¢</a
      >
    </li>
    <li class="sns-list-item">
      <a class="sns-list-link" href="https://blog.inmind.ltd/" target="_blank"
        >Mind's blog</a
      >
    </li>
    <li class="sns-list-item">
      <a
        class="sns-list-link"
        href="https://oldchen.top/flutter-blog/#/"
        target="_blank"
        >è€æ™¨å­</a
      >
    </li>
    <li class="sns-list-item">
      <a class="sns-list-link" href="https://www.v2fy.com/" target="_blank"
        >çŒ«çˆªå¯¼èˆªğŸ±</a
      >
    </li>
    <li class="sns-list-item">
      <a class="sns-list-link" href="https://wxsm.space" target="_blank"
        >wxsm's space</a
      >
    </li>
  </ul>
</footer>
 <!--
 Copyright (c) 2021 Cold Stone
 
 This software is released under the MIT License.
 https://opensource.org/licenses/MIT
-->
<script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.7.2/build/highlight.min.js"></script>
<script src="/index.js"></script>

  </body>
</html>
